<script type="text/javascript">
    RED.nodes.registerType('princip-ffmpeg-params-setup', {
      category: 'config',
      defaults: {
        inputFormat: {value: undefined},
        inputParamsString: {value: undefined},
        inputSource: {value: undefined, required: true},
        outputFormat: {value: "gif", required: true},
        outputParamsString: {value: undefined}
      },
      label: function() {
        var inputFormat = (this.inputFormat) ? `-f ${this.inputFormat}` : '';
        var outputFormat = (this.outputFormat) ? `-f ${this.outputFormat}` : '';
        return `${inputFormat} ${this.inputParamsString} -i ${this.inputSource} ${this.outputParamsString} ${outputFormat}`;
      }
    });
</script>

<script type="text/x-red" data-template-name="princip-ffmpeg-params-setup">
    <div class="form-row">
        <label for="node-config-input-inputFormat"><i class="fa fa-tag"></i> Input format</label>
        <input type="text" id="node-config-input-inputFormat" placeholder="Input format">
    </div>

    <div class="form-row">
        <label for="node-config-input-inputParamsString"><i class="fa fa-tag"></i> Input params</label>
        <input type="text" id="node-config-input-inputParamsString" placeholder="Input params">
    </div>

    <div class="form-row">
        <label for="node-config-input-inputSource"><i class="fa fa-tag"></i> Input source</label>
        <input type="text" id="node-config-input-inputSource" placeholder="Input source">
    </div>

    <div class="form-row">
        <label for="node-config-input-outputFormat"><i class="fa fa-tag"></i> Output format</label>
        <input type="text" id="node-config-input-outputFormat" placeholder="Output format">
    </div>

    <div class="form-row">
        <label for="node-config-input-outputParamsString"><i class="fa fa-tag"></i> Output params</label>
        <input type="text" id="node-config-input-outputParamsString" placeholder="Output params">
    </div>

    <div class="form-tips"><b>Example RSTP-GIF:</b> Input format: 'rstp', Input source: 'rtsp://media.smart-streaming.com/mytest/mp4:sample.mp4', Output format: 'gif', Output params: '-r 10'</div>

    <div class="form-tips"><b>Example FACETIME-GIF:</b> Input format: 'avfoundation', Input params: '-framerate 30', Input source: '0', Output format: 'gif', Output params: '-pix_fmt rgb8'</div>
</script>
